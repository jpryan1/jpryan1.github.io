---
layout: post
title: "Mandelbrot in MATLAB"
---

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

Along the same vein as my last blog post, I decided to see how few lines of code it would take to come up with some cool Mandelbrot pictures.

The Mandelbrot Set is a set of numbers described by a very simple mathematical statement. The set is famous in mathematics for it's properties of self-similarity, as well as other cool facts that you can find out about on its [Wiki](https://en.wikipedia.org/wiki/Mandelbrot_set) page if you're interested. Here's a visualization of the Mandelbrot set.
<figure>
<a href="/images/mand/mand.png">
<img style="margin:0px auto;display:block;width:600px;" src="/images/mand/mand.png" />
</a>
<figcaption style="text-align:center" >Generated in MATLAB.</figcaption>
</figure>
What exactly is going on in the above image? To answer this, we very briefly discuss what <em>is</em> the Mandelbrot Set. If you're already familiar or don't care to see the math, skip this section. 
<h3> What is the Mandelbrot Set</h3>

We begin by picking a complex number \\(c\\); let's say \\(c=-1\\). Now we generate a sequence of numbers based on the following rules:

* The first number is \\(0\\)
* If the \\(n\\)th number is \\(z\\), then the \\((n+1)\\)th number is \\(z^2+1\\). 

In our example, the second number would be \\(0^2+(-1)=-1\\), then the third number would be \\((-1)^2+(-1)=0\\), and so on. The <em> Mandelbrot Set </em> is every complex number \\(c\\) such that, when you follow the rules above to create a sequence based on \\(c\\), every number in the sequence has magnitude less than 2. (From now on, I'm not going to use the word "magnitude", I will just say greater than or less than 2). Our example, \\(c=-1\\), generated the sequence \\(0,-1,0,-1,0,-1,...\\), so \\(-1\\) is certainly in the Mandelbrot set. However, if we chose \\(c=1\\), then the generated sequence would be \\(0,1,2,5,26,...\\), so \\(1\\) is <em>not</em> in the Mandelbrot set. 

With this definition in mind, we can visualize the Mandelbrot Set by painting it on the complex plane - if a complex number is in the set, we paint it white, otherwise we paint it white. That process gives us this image:
<figure>
<a href="/images/mand/bin.png">
<img style="margin:0px auto;display:block;width:600px;" src="/images/mand/bin.png" />
</a>
<figcaption style="text-align:center" >White = Mandelbrot Set</figcaption>
</figure>
But wait, how can we tell for sure whether a complex number will generate a sequence that hits a number greater than \\(2\\)? After all, we can't check the whole infinite sequence! In my program, I check only the first \\(10,000\\) numbers in the sequence; the error from this approximation is very small, and imperceptible in the image. 

With this in mind, it's time to make the picture more colorful! Remember that the sequence for \\(c=1\\) is  \\(0,1,2,5,...\\). In this sequence, the magnitude became greater than two by the fourth number of the sequence (which saved us from having to check 9,996 more values). However, for certain other complex numbers, the sequence doesn't become greater than \\(2\\) until much later - for example, the sequence generated by \\(c=0.254\\) doesn't become greater than \\(2\\) until the 48th number of the sequence! With this in mind, we can do the following: instead of coloring every number that isn't in the Mandelbrot Set black, we can color them based on how long it takes for their sequence to become greater than \\(2\\). Once that idea is converted to code, we get the colorful image at the top!

<h3> The MATLAB implementation </h3>

The program I wrote is only about 75 lines of MATLAB [(available here)](https://github.com/jpryan1/mandelbrot), and allows the user to zoom into the image, toggle the colormap, and switch between viewing the Mandelbrot set and the Julia set.
<figure>
<a href="/images/mand/julia.png">
<img style="margin:0px auto;display:block;width:600px;" src="/images/mand/julia.png" />
</a>
<figcaption style="text-align:center" >Julia Set for c=-0.79+0.15i. Pretty colors ^_^ </figcaption>
</figure>
